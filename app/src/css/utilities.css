/* ====================================================================
   info-bulles (tippy.js)
   ==================================================================== */
.tippy-box {
    font-family: inherit;
    font-size: 13px;
    font-weight: 500;
    line-height: 1.5;
}

/* Thème "custom-theme" - Style Premium Clair (Glassmorphism) */
.tippy-box[data-theme~='custom-theme'] {
    background-color: rgba(255, 255, 255, 0.95);
    /* Fond clair presque opaque */
    color: #1e293b;
    /* Texte gris foncé (Slate 800) pour lisibilité */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: none;
    /* Plus de bordure pour éviter l'effet "sale" */
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
    font-size: 13px;
    font-weight: 500;
    text-align: center;
}

/* Flèche du tooltip - Masquée pour le style "custom-theme" */
.tippy-box[data-theme~='custom-theme'] .tippy-arrow {
    display: none !important;
}

/* ============================
   DARK MODE SUPPORT - Tooltips
   ============================ */
[data-theme="dark"] .tippy-box[data-theme~='custom-theme'] {
    background-color: rgba(30, 41, 59, 0.95);
    /* Sombre et profond */
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.08);
    /* Bordure subtile pour contraste */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}

/* Centrage horizontal pour top/bottom */
.tippy-box[data-theme~='custom-theme'][data-placement^='top']>.tippy-arrow::before,
.tippy-box[data-theme~='custom-theme'][data-placement^='bottom']>.tippy-arrow::before {
    left: 50%;
    transform: translateX(-50%);
}

/* Centrage vertical pour left/right */
.tippy-box[data-theme~='custom-theme'][data-placement^='left']>.tippy-arrow::before,
.tippy-box[data-theme~='custom-theme'][data-placement^='right']>.tippy-arrow::before {
    top: 50%;
    transform: translateY(-50%);
}

/* TOP placement */
.tippy-box[data-theme~='custom-theme'][data-placement^='top']>.tippy-arrow::before {
    bottom: -7px;
    border-width: 7px 7px 0;
    border-top-color: rgba(30, 41, 59, 0.95);
}

/* BOTTOM placement */
.tippy-box[data-theme~='custom-theme'][data-placement^='bottom']>.tippy-arrow::before {
    top: -7px;
    border-width: 0 7px 7px;
    border-bottom-color: rgba(30, 41, 59, 0.95);
}

/* LEFT placement */
.tippy-box[data-theme~='custom-theme'][data-placement^='left']>.tippy-arrow::before {
    right: -7px;
    border-width: 7px 0 7px 7px;
    border-left-color: rgba(30, 41, 59, 0.95);
}

/* RIGHT placement */
.tippy-box[data-theme~='custom-theme'][data-placement^='right']>.tippy-arrow::before {
    left: -7px;
    border-width: 7px 7px 7px 0;
    border-right-color: rgba(30, 41, 59, 0.95);
}

.tippy-content {
    padding: 8px 12px;
}

/* ====================================================================
   utilitaires
   ==================================================================== */
body.modal-open,
body.side-panel-open {
    overflow: hidden;
}

/* Media Queries - Complémentaires à layout.css */
@media (max-width: 1024px) {
    :root {
        --sidebar-width: 380px;
    }

    /* Stats container layout handled in stats.css */
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }

    .period-main-row,
    .previous-period-group .form-row {
        grid-template-columns: 1fr;
    }
}

@media print {

    .sidebar,
    .header {
        display: none !important;
    }

    .app-layout {
        display: block;
        height: auto;
    }

    .main-content-wrapper {
        height: auto;
        overflow: visible;
    }

    .main-content {
        padding: 0;
        max-width: none;
    }

    .appreciation-result {
        break-inside: avoid;
        border: 1px solid #ccc;
        box-shadow: none;
    }
}

/* Correction kbd-hint dans les tooltips */
.tippy-box .kbd-hint {
    margin-left: 0;
    margin-top: 4px;
    display: inline-block;
}

/* ============================
   Custom Animation: Organic Scale
   ============================ */
.tippy-box[data-animation='organic-scale'] {
    transform-origin: bottom center;
    transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
}

.tippy-box[data-animation='organic-scale'][data-placement^='top'] {
    transform-origin: bottom center;
}

.tippy-box[data-animation='organic-scale'][data-placement^='bottom'] {
    transform-origin: top center;
}

.tippy-box[data-animation='organic-scale'][data-placement^='left'] {
    transform-origin: right center;
}

.tippy-box[data-animation='organic-scale'][data-placement^='right'] {
    transform-origin: left center;
}

.tippy-box[data-animation='organic-scale'][data-state='hidden'] {
    opacity: 0;
    transform: scale(0.92) translateY(4px);
}

.tippy-box[data-animation='organic-scale'][data-state='visible'] {
    opacity: 1;
    transform: scale(1) translateY(0);
}