/* ====================================================================
   NEBULA DESIGN SYSTEM - APP VARIABLES
   ==================================================================== */
:root {
    /* --- Palette Nebula (Unified Blue/Purple - Light Mode) --- */
    /* Primary: Blue (Standard Tailwind Blue 500) */
    --primary-color: #3b82f6;
    --primary-color-rgb: 59, 130, 246;
    --primary-hover: #2563eb;
    /* Blue 600 */

    /* Accent: Purple (Tailwind Purple 600) */
    --accent-color: #9333ea;
    --accent-rgb: 147, 51, 234;

    /* Neutres : Palette Zinc (True Neutral) */
    --bg-color: #fafafa;
    /* Zinc 50 */
    --bg-secondary: #f4f4f5;
    /* Zinc 100 */
    --bg-tertiary: #e4e4e7;
    /* Zinc 200 */
    --bg-hover: #e4e4e7;
    /* Zinc 200 */

    --surface-color: #ffffff;
    --surface-color-rgb: 255, 255, 255;

    --border-color: rgba(161, 161, 170, 0.15);
    /* Zinc 400 with opacity */

    /* Texte : Zinc Neutral */
    --text-primary: #18181b;
    /* Zinc 900 */
    --text-secondary: #52525b;
    /* Zinc 600 */
    --text-tertiary: #a1a1aa;
    /* Zinc 400 */

    /* --- Système Glassmorphism Unifié (Modern Tech) --- */
    /* Niveau 1 : Base (Panneaux fixes) */
    --glass-base-bg: rgba(248, 250, 252, 0.75);
    --glass-base-border: rgba(226, 232, 240, 0.6);
    --glass-base-blur: 24px;

    /* Niveau 2 : Surface (Cartes interactions) */
    --glass-surface-bg: rgba(255, 255, 255, 0.85);
    --glass-surface-border: rgba(255, 255, 255, 0.8);
    --glass-surface-blur: 16px;

    /* --- Universal Card Style (Single Source of Truth) --- */
    --card-glass-bg: rgba(255, 255, 255, 0.75);
    --card-glass-border: rgba(255, 255, 255, 0.8);

    /* Niveau 3 : Overlay (Modales / Popovers) - Frosted glass effect */
    --glass-overlay-bg: rgba(255, 255, 255, 0.8);
    --glass-overlay-border: rgba(255, 255, 255, 0.6);
    --glass-overlay-blur: 24px;

    /* --- Physique & Géométrie --- */
    /* Rayons unifiés */
    --radius-pill: 9999px;
    /* Pour badges, chips, pilules */
    --radius-xl: 32px;
    --radius-lg: 20px;
    --radius-md: 14px;
    --radius-sm: 8px;
    --radius-xs: 4px;
    /* Pour petits éléments internes */

    /* Input border width (single source of truth) */
    --input-border-width: 1.5px;
    --input-border-width-focus: 2px;
    /* Thicker for animated gradient focus */
    --input-focus-bg: var(--surface-color);
    --input-fill-bg: var(--bg-secondary);
    --card-input-padding: 12px 16px;

    /* Ombres "Lift" (Blue tint) */
    --shadow-sm: 0 1px 3px rgba(15, 23, 42, 0.08);
    --shadow-md: 0 4px 12px -2px rgba(15, 23, 42, 0.08), 0 2px 6px -1px rgba(15, 23, 42, 0.04);
    --shadow-lg: 0 12px 32px -4px rgba(15, 23, 42, 0.12), 0 4px 12px -2px rgba(15, 23, 42, 0.06);
    --shadow-xl: 0 24px 48px -12px rgba(15, 23, 42, 0.15);

    /* --- Couleurs Sémantiques (Vives mais dosées) --- */
    --success-color: #10b981;
    --success-rgb: 16, 185, 129;
    --success-light: rgba(16, 185, 129, 0.15);

    --warning-color: #f59e0b;
    --warning-rgb: 245, 158, 11;
    --warning-light: rgba(245, 158, 11, 0.12);

    --error-color: #ef4444;
    --error-hover: #dc2626;
    /* Red 600 */
    --error-rgb: 239, 68, 68;
    --error-light: rgba(239, 68, 68, 0.15);

    /* Close Button Design Tokens */
    --close-btn-bg: transparent;
    --close-btn-color: var(--text-secondary);
    --close-btn-hover-bg: var(--error-light);
    --close-btn-hover-color: var(--error-color);

    --purple-color: #9333ea;
    --purple-rgb: 147, 51, 234;
    --purple-light: rgba(147, 51, 234, 0.15);

    --neutral-light: rgba(161, 161, 170, 0.15);
    /* Zinc 400 with opacity */

    --info-color: #3b82f6;
    --info-rgb: 59, 130, 246;
    --info-light: rgba(59, 130, 246, 0.15);

    /* Grade Range Colors */
    --grade-range-0-4: #EF4444;
    --grade-range-4-8: #F97316;
    --grade-range-8-12: #EAB308;
    --grade-range-12-16: #14b8a6;
    --grade-range-16-20: #22c55e;

    /* Transitions & Animations */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

    /* --- Typography Scale --- */
    --font-xs: 0.75rem;
    /* 12px */
    --font-sm: 0.8125rem;
    /* 13px */
    --font-base: 0.875rem;
    /* 14px */
    --font-md: 1rem;
    /* 16px */
    --font-lg: 1.125rem;
    /* 18px */
    --font-xl: 1.25rem;
    /* 20px */
    --font-2xl: 1.5rem;
    /* 24px */

    /* Spacing System */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;

    --gap-xs: var(--space-2);
    --gap-sm: var(--space-3);
    --gap-md: var(--space-4);
    --gap-lg: var(--space-5);
    --gap-xl: var(--space-6);

    /* Layout */
    --sidebar-width: 460px;
    --glow-highlight: rgba(59, 130, 246, 0.6);
    /* Blue Glow */

    /* --- Gradients --- */
    --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--purple-color) 100%);
    --gradient-ai: linear-gradient(135deg, var(--primary-color) 0%, var(--purple-color) 100%);

    --gradient-warning: linear-gradient(135deg, var(--warning-color) 0%, #ea580c 100%);
    --warning-hover: #ea580c;

    /* --- Z-Index Scale --- */
    --z-negative: -1;
    --z-normal: 1;
    --z-base: 1;
    --z-sidebar: 50;
    --z-focus-panel-backdrop: 590;
    --z-focus-panel: 600;
    --z-header: 700;
    --z-dropdown: 100;
    --z-sticky: 500;
    --z-modal-backdrop: 900;
    --z-modal: 1000;
    --z-tooltip: 1100;
    --z-toast: 2000;
    --z-skip-link: 10000;

    /* --- Global Component Variables --- */
    --scrollbar-width: 8px;

    /* --- Modal System Tokens (Core Foundation) --- */
    --modal-backdrop-bg: rgba(0, 0, 0, 0.5);
    --modal-backdrop-blur: 8px;
    --modal-bg: var(--surface-color);
    --modal-radius: var(--radius-lg);
    --modal-border: 1px solid var(--border-color);
    --modal-shadow: var(--shadow-lg);

    /* Layout Tokens */
    --modal-width: 900px;
    --modal-max-height: 90vh;
    --modal-padding: 16px;
    /* Default body padding */
    --modal-padding-spacious: 24px;

    /* Bar Tokens */
    --modal-header-height: 60px;
    --modal-header-padding: 16px 20px;
    --modal-header-border: 1px solid var(--border-color);

    --modal-footer-height: 48px;
    --modal-footer-padding: 10px 20px;
    --modal-footer-border: 1px solid var(--border-color);

    /* --- Close Button Tokens --- */
    --close-btn-size: 32px;
    --close-btn-icon-size: 18px;

    /* --- Guide Panel Tokens --- */
    --guide-panel-bg: rgba(244, 244, 245, 0.5);
    /* Zinc 100 equiv */

    /* --- Card Item Tokens (Single Source of Truth for list items in modals) --- */
    /* Repos : contour fin neutre, pas d'ombre */
    --card-item-bg: var(--surface-color);
    --card-item-border: 1px solid var(--border-color);
    --card-item-radius: var(--radius-lg);
    --card-item-shadow: none;
    /* Hover : contour bleu primaire subtil, ombre douce */
    --card-item-hover-border-color: rgba(var(--primary-color-rgb), 0.3);
    --card-item-hover-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
}

[data-theme="dark"] {
    /* Zinc Dark Mode */
    --primary-color: #60a5fa;
    /* Blue 400 */
    --primary-color-rgb: 96, 165, 250;
    --primary-hover: #3b82f6;
    /* Blue 500 */

    --purple-color: #a78bfa;
    /* Violet 400 */
    --purple-rgb: 167, 139, 250;

    /* Dark Mode Neutral Tint */
    --neutral-light: rgba(161, 161, 170, 0.15);
    /* Zinc 400 tint */

    --bg-color: #09090b;
    /* Zinc 950 */
    --bg-secondary: #18181b;
    /* Zinc 900 */
    --bg-tertiary: #27272a;
    /* Zinc 800 */

    --surface-color: #18181b;
    /* Zinc 900 */
    --surface-color-rgb: 24, 24, 27;

    --bg-hover: #27272a;
    /* Zinc 800 */
    --border-color: rgba(255, 255, 255, 0.08);

    --text-primary: #fafafa;
    /* Zinc 50 */
    --text-secondary: #a1a1aa;
    /* Zinc 400 */
    --text-tertiary: #71717a;
    /* Zinc 500 */

    /* Glass Dark */
    --glass-base-bg: rgba(9, 9, 11, 0.7);
    /* Zinc 950 */
    --glass-base-border: rgba(255, 255, 255, 0.08);

    --glass-surface-bg: rgba(24, 24, 27, 0.75);
    /* Zinc 900 */
    --glass-surface-border: rgba(255, 255, 255, 0.12);

    --glass-overlay-bg: rgba(9, 9, 11, 0.75);
    /* Zinc 950 */
    --glass-overlay-border: rgba(255, 255, 255, 0.1);

    /* Ombres plus fortes en dark mode */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 12px 32px -4px rgba(0, 0, 0, 0.6);

    --glow-highlight: rgba(96, 165, 250, 0.4);

    /* Gradients Dark Mode */
    --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    --gradient-ai: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);

    /* --- Universal Card Style --- */
    --card-glass-bg: rgba(24, 24, 27, 0.6);
    /* Zinc 900 */
    --card-glass-border: rgba(255, 255, 255, 0.12);

    /* --- Guide Panel Tokens --- */
    --guide-panel-bg: rgba(255, 255, 255, 0.03);

    /* --- Card Item Tokens (Dark Mode) --- */
    --card-item-hover-border-color: rgba(var(--primary-color-rgb), 0.35);
    --card-item-hover-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
}