/* ====================================================================
   MODULE: Animations
   Keyframes et transitions d'interface
   ==================================================================== */

@keyframes spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

@keyframes pulse-update {
    0% {
        box-shadow: var(--shadow-sm);
    }

    50% {
        box-shadow: 0 0 0 8px rgba(var(--primary-color-rgb), 0.25), var(--shadow-md);
    }

    100% {
        box-shadow: var(--shadow-sm);
    }
}

.card-content-wrapper.is-updating,
.stat-card.pulse-update {
    animation: pulse-update 0.6s ease-out;
}

@keyframes highlight-new {
    0% {
        box-shadow: var(--shadow-sm);
    }

    50% {
        box-shadow: 0 0 0 4px var(--success-light), var(--shadow-md);
    }

    100% {
        box-shadow: var(--shadow-sm);
    }
}

@keyframes flash-bg {
    0% {
        background-color: var(--surface-color);
    }

    50% {
        background-color: rgba(var(--primary-color-rgb), 0.1);
    }

    100% {
        background-color: var(--surface-color);
    }
}

.flash-bg {
    animation: flash-bg 0.6s ease-out;
}

/* ====================================================================
   iOS 2025 PREMIUM SLIDE TRANSITIONS
   Animations fluides pour navigation entre contenus (modales, tabs, etc.)
   ==================================================================== */

@keyframes content-slide-out-left {
    from {
        transform: translateX(0) scale(1);
        opacity: 1;
    }

    to {
        transform: translateX(-60px) scale(0.96);
        opacity: 0;
    }
}

@keyframes content-slide-in-right {
    from {
        transform: translateX(60px) scale(0.96);
        opacity: 0;
    }

    to {
        transform: translateX(0) scale(1);
        opacity: 1;
    }
}

@keyframes content-slide-out-right {
    from {
        transform: translateX(0) scale(1);
        opacity: 1;
    }

    to {
        transform: translateX(60px) scale(0.96);
        opacity: 0;
    }
}

@keyframes content-slide-in-left {
    from {
        transform: translateX(-60px) scale(0.96);
        opacity: 0;
    }

    to {
        transform: translateX(0) scale(1);
        opacity: 1;
    }
}

/* iOS Spring Easing: cubic-bezier(0.32, 0.72, 0, 1) */
.modal-body.content-slide-out-left,
.tab-content.content-slide-out-left {
    animation: content-slide-out-left 0.35s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

.modal-body.content-slide-in-right,
.tab-content.content-slide-in-right {
    animation: content-slide-in-right 0.4s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

.modal-body.content-slide-out-right,
.tab-content.content-slide-out-right {
    animation: content-slide-out-right 0.35s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

.modal-body.content-slide-in-left,
.tab-content.content-slide-in-left {
    animation: content-slide-in-left 0.4s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

/* Position absolute durant la sortie pour permettre le chevauchement fluide */
.tab-content.content-slide-out-left,
.tab-content.content-slide-out-right {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1;
    pointer-events: none;
}

@keyframes icon-swap {
    0% {
        transform: scale(1) rotate(0deg);
    }

    50% {
        transform: scale(1.2) rotate(180deg);
    }

    100% {
        transform: scale(1) rotate(360deg);
    }
}

@keyframes pulsing {

    0%,
    100% {
        box-shadow: 0 0 5px rgba(var(--primary-color-rgb), 0.2);
    }

    50% {
        box-shadow: 0 0 15px rgba(var(--primary-color-rgb), 0.6);
    }
}

@keyframes shine-continuous {
    0% {
        left: -100%;
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        left: 200%;
        opacity: 0;
    }

    100% {
        left: 200%;
        opacity: 0;
    }
}

.btn.pulsing,
#refreshPreviewBtn.pulsing {
    position: relative;
    overflow: hidden;
    transform: none !important;
    /* Prevents bouncing/scaling/rebound */
}

/* Disable hover effects that might cause movement while pulsing */
.btn.pulsing:hover,
#refreshPreviewBtn.pulsing:hover {
    transform: none !important;
    /* Maintain the shadow from the animation, or let the hover shadow take over? 
       Let's keep the pulsing shadow dominant or combine them. */
}

.btn.pulsing::before,
#refreshPreviewBtn.pulsing::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shine-continuous 3s ease-in-out infinite;
    pointer-events: none;
    z-index: 1;
}

.btn.pulsing>*,
#refreshPreviewBtn.pulsing>* {
    position: relative;
    z-index: 2;
}

@keyframes pulsing-dot {

    0%,
    100% {
        opacity: 0.3;
    }

    50% {
        opacity: 1;
    }
}

.pulsing-dot {
    display: inline-block;
    width: 6px;
    height: 6px;
    border-radius: var(--radius-pill);
    background: var(--primary-color);
    animation: pulsing-dot 1.5s ease-in-out infinite;
    margin-left: 4px;
}

@keyframes fading-out {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

.appreciation-result.fading-out {
    animation: fading-out 0.3s ease-out forwards;
}

/* ====================================================================
   MICRO-INTERACTIONS - Feedback visuel premium
   ==================================================================== */

/* Success Bounce - Animation de confirmation réussie */
@keyframes success-bounce {
    0% {
        transform: scale(1);
    }

    25% {
        transform: scale(1.05);
    }

    50% {
        transform: scale(0.98);
    }

    75% {
        transform: scale(1.02);
    }

    100% {
        transform: scale(1);
    }
}

.success-bounce {
    animation: success-bounce 0.4s ease-out;
}

/* Error Shake - Animation d'erreur */
@keyframes error-shake {

    0%,
    100% {
        transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateX(-4px);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateX(4px);
    }
}

.error-shake {
    animation: error-shake 0.5s ease-out;
}

/* Copy Success - Pulse vert après copie */
@keyframes copy-success-pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.5);
    }

    50% {
        box-shadow: 0 0 0 8px rgba(16, 185, 129, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
    }
}

.copy-success {
    animation: copy-success-pulse 0.6s ease-out;
}

/* Card generation success glow */
@keyframes card-success-glow {
    0% {
        box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb), 0.6), var(--shadow-sm);
    }

    30% {
        box-shadow: 0 0 30px 8px rgba(var(--primary-color-rgb), 0.4), 0 0 60px 16px rgba(var(--primary-color-rgb), 0.15), var(--shadow-lg);
    }

    60% {
        box-shadow: 0 0 20px 4px rgba(var(--primary-color-rgb), 0.25), var(--shadow-md);
    }

    100% {
        box-shadow: var(--shadow-sm);
    }
}

.appreciation-result.just-generated .card-content-wrapper {
    animation: card-success-glow 1.2s ease-out;
}

/* Card error glow */
@keyframes card-error-glow {
    0% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4), var(--shadow-sm);
    }

    50% {
        box-shadow: 0 0 20px 4px rgba(239, 68, 68, 0.2), var(--shadow-md);
    }

    100% {
        box-shadow: var(--shadow-sm);
    }
}

.appreciation-result.just-errored .card-content-wrapper {
    animation: card-error-glow 1s ease-out;
}

.appreciation-result.just-errored {
    animation: error-shake 0.5s ease-out;
}

@keyframes fadein {
    from {
        opacity: 0;
        transform: translatey(8px);
    }

    to {
        opacity: 1;
        transform: translatey(0);
    }
}

/* ====================================================================
   ROTATING GRADIENT BORDER - État sélectionné subtil
   Utilisation: ajouter la classe .selected-glow à un élément
   ==================================================================== */

@keyframes rotate-gradient {
    from {
        --gradient-angle: 0deg;
    }

    to {
        --gradient-angle: 360deg;
    }
}

/* Support pour les propriétés CSS personnalisées animées */
@property --gradient-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}

/* Classe utilitaire pour l'effet de sélection avec dégradé rotatif */
.selected-glow {
    position: relative;
    background: var(--surface-color, #fff);
    border: 2px solid transparent !important;
    border-radius: inherit;
}

.selected-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    padding: 2px;
    background: conic-gradient(from var(--gradient-angle),
            rgba(var(--primary-color-rgb), 0.65) 0%,
            rgba(var(--primary-color-rgb), 0.65) 18%,
            var(--glow-highlight) 23%,
            var(--glow-highlight) 27%,
            rgba(var(--primary-color-rgb), 0.65) 32%,
            rgba(var(--primary-color-rgb), 0.65) 50%,
            rgba(var(--primary-color-rgb), 0.65) 68%,
            var(--glow-highlight) 73%,
            var(--glow-highlight) 77%,
            rgba(var(--primary-color-rgb), 0.65) 82%,
            rgba(var(--primary-color-rgb), 0.65) 100%);
    -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
    mask-composite: exclude;
    animation: rotate-gradient 7s linear infinite;
    opacity: 0.9;
    pointer-events: none;
    z-index: -1;
}

/* Variante plus subtile - opacité réduite */
.selected-glow-subtle::before {
    opacity: 0.5;
    animation-duration: 16s;
}

/* Variante pour les éléments avec border-radius spécifique */
.selected-glow[data-radius="8"]::before,
.selected-glow-subtle[data-radius="8"]::before {
    border-radius: var(--radius-md);
}

.selected-glow[data-radius="12"]::before,
.selected-glow-subtle[data-radius="12"]::before {
    border-radius: var(--radius-md);
}

.selected-glow[data-radius="full"]::before,
.selected-glow-subtle[data-radius="full"]::before {
    border-radius: var(--radius-pill);
}

/* ====================================================================
   PAGE ENTRANCE ANIMATION (iOS 2025 Style)
   Triggered when user arrives from landing page
   ==================================================================== */

/* Entry animation: Blur-to-sharp + Fade-in + slight scale-up */
@keyframes pageEnterBlur {
    0% {
        opacity: 0;
        filter: blur(12px);
        transform: scale(0.96);
    }

    100% {
        opacity: 1;
        filter: blur(0);
        transform: scale(1);
    }
}

/* Applied to body when transitioning in from landing */
body.is-transitioning-in {
    animation: pageEnterBlur 0.7s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

/* Staggered entrance for key elements (optional enhancement) */
body.is-transitioning-in .header {
    animation: pageEnterBlur 0.6s cubic-bezier(0.32, 0.72, 0, 1) 0.05s both;
}

body.is-transitioning-in .main-content {
    animation: pageEnterBlur 0.7s cubic-bezier(0.32, 0.72, 0, 1) 0.1s both;
}

/* Prevent flash of unstyled content during transition */
body.preload-transition {
    opacity: 0;
}

/* ====================================================================
   TEXT REVEAL ANIMATIONS
   Standard AI Text Reveal (Progressive Blur)
   ==================================================================== */

@keyframes text-blur-reveal {
    0% {
        opacity: 0.4;
        filter: blur(4px);
        clip-path: inset(0 0 100% 0);
        transform: translateY(10px);
    }

    100% {
        opacity: 1;
        filter: blur(0);
        clip-path: inset(0 0 0 0);
        transform: translateY(0);
    }
}

.text-blur-reveal {
    /* Slower duration to emphasize the 'reading/streaming' effect */
    animation: text-blur-reveal 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    will-change: transform, opacity, filter, clip-path;
}